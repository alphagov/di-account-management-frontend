{% extends "govuk/template.njk" %}
{% from "govuk/components/cookie-banner/macro.njk" import govukCookieBanner %}
{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}

{% block head %}
    <!--[if !IE 8]><!-->
    <link href="/public/style.css" rel="stylesheet">
    <!--<![endif]-->

    {# For Internet Explorer 8, you need to compile specific stylesheet #}
    {# see https://frontend.design-system.service.gov.uk/supporting-ie8/#support-internet-explorer-8 #}
    <!--[if IE 8]> <link href="/govuk-frontend/all-ie8.css" rel="stylesheet"> <![endif]-->

    {# For older browsers to allow them to recognise HTML5 elements such as `<header>` #}
    <!--[if lt IE 9]> <script src="/html5-shiv/html5shiv.js"></script> <![endif]-->

{% endblock %}

{% block pageTitle %}
    {% if error or errors %}
        {{ 'general.errorTitlePrefix' | translate }}
        -
    {% endif %}
    {% if pageTitleName %}
        {{ pageTitleName }}
        -
    {% endif %}
    {{ 'general.serviceNameTitle' | translate }}
{% endblock %}

{% block bodyStart %}
    {% include 'common/layout/banner.njk' %}
{% endblock %}

{% block header %}
  {% if supportNewAccountHeader %}
    {{ govukHeader({
      homepageUrl: 'general.header.homepageHref' | translate,
      productName: 'general.header.productName' | translate,
      classes: "govuk-header--with-account-navigation" if not hideSignOutLink
    }) }}
    {% if not hideSignOutLink %}
      {% include 'common/layout/navigation.njk' %}
    {% endif %}
  {% else %}
    {{ govukHeader({
        homepageUrl: 'general.header.homepageHref' | translate,
        navigationClasses: "govuk-header__navigation--end",
        navigation: false if hideSignOutLink else [
        {
          href: accountHome,
          text: 'general.header.accountLink' | translate,
          active: true
        },
        {
            href: "/sign-out",
            text: 'general.header.signOutLink' | translate
        }
      ]
    }) }}
  {% endif %}
{% endblock %}

{% block main %}
    <div class="govuk-width-container {{ containerClasses }}">
        {{ govukPhaseBanner({
            tag: {
                text: 'general.phaseBanner.tag' | translate
            },
            html: 'general.phaseBanner.text' | translate | replace ("[supportUrl]", authFrontEndUrl + "/contact-us?supportType=PUBLIC")
        }) }}
        {% if backLink %}
            <a href="{{backLink}}" class="govuk-back-link">{{'general.back' | translate}}</a>
        {% endif %}
        {% block beforeContent %}{% endblock %}
        <main class="govuk-main-wrapper {{ mainClasses }}" id="main-content" role="main" {% if mainLang %} lang="{{ mainLang }}" {% endif %}>
            {% block content %}{% endblock %}
        </main>
    </div>
    {% block feedback %}{% endblock %}

{% endblock %}

{% block footer %}
    {{ govukFooter({
        meta: {
            items: [
                {
                    href: authFrontEndUrl + "/accessibility-statement",
                    text: 'general.footer.accessibilityStatement.linkText' | translate
                },
                {
                    href: authFrontEndUrl + "/cookies",
                    text: 'general.footer.cookies.linkText' | translate
                },
                {
                    href: authFrontEndUrl + "/terms-and-conditions",
                    text: 'general.footer.terms.linkText' | translate
                },
                {
                    href: authFrontEndUrl + "/privacy-notice",
                    text: 'general.footer.privacy.linkText' | translate
                }
            ]
        },
        contentLicence: {
          text: 'general.footer.contentLicence.linkText' | translate | safe
        },
        copyright: {
          text: 'general.footer.copyright.linkText' | translate
        }
      })
    }}
{% endblock %}

{% block bodyEnd %}
    {% block scripts %}{% endblock %}
    <script type="text/javascript" src="/public/scripts/cookies.js"></script>
    <script type="text/javascript" src="/public/scripts/application.js"></script>
    <script type="text/javascript" src="/public/scripts/all.js"></script>
    <script type="text/javascript" nonce='{{scriptNonce}}'>
        window
            .GOVSignIn
            .appInit("{{gtmId}}", "{{ analyticsCookieDomain }}")
    </script>
{% endblock %}
